<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <title>SkillPathIA</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/styles_cursos.css">
  <link rel="stylesheet" href="css/stylesMR.css">
</head>
<body>
  <!-- Navbar -->
  <header class="navbar">
    <a class="navbar-brand" href="home.html">
      <img src="assets/icons/logo.png" alt="Logo" />
      <span class="brand-skill">SkillPath</span><span class="brand-ia">IA</span>
    </a>
    <nav class="navbar-cursos">
      <a href="lista_cursos.html" class="nav-cursos">Cursos</a>
    </nav>
    <div class="navbar-busqueda">
      <form class="search-form" action="#" method="get">
        <input type="text" name="q" placeholder="Buscar cursos..." aria-label="Buscar cursos" />
      </form>
    </div>
    <input type="checkbox" id="menu-toggle" class="menu-toggle" />
    <label for="menu-toggle" class="menu-icon">&#9776;</label>
    <div class="navbar-derecha">
      <nav class="navbar-precios">
        <a href="home.html#precios" class="btn-primary">Precios</a>
      </nav>
      <div class="navbar-avatar navbar-avatar-desktop" id="avatarDesktop">
        <img src="assets/images/perfil.jpg" alt="Avatar de usuario" />
        <div class="avatar-menu" id="avatarMenu">
          <button class="avatar-menu__item" id="logoutBtn">Cerrar sesion</button>
        </div>
      </div>
    </div>
    <hr class="linea-divisoria">
  </header>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <nav class="sidebar-menu">
      <a href="home.html"><i class="fas fa-home"></i><span class="sidebar-text">Inicio</span></a>
      <a href="mis_rutas.html"><i class="fas fa-route"></i><span class="sidebar-text">Mis Rutas</span></a>
      <a href="ver_comunidad.html"><i class="fas fa-users"></i><span class="sidebar-text">Comunidad</span></a>
      <a href="dashboard.html"><i class="fas fa-chart-line"></i><span class="sidebar-text">Dashboard</span></a>
      <div class="navbar-avatar navbar-avatar-mobile">
        <img src="assets/images/perfil.jpg" alt="Avatar de usuario" />
      </div>
    </nav>
    <div style="flex:1"></div>
    <div class="sidebar-toggle" id="sidebarToggle" style="display:flex;align-items:center;justify-content:center;height:48px;font-size:1.3rem;cursor:pointer;position:relative;">&lt;&lt;</div>
  </aside>
  
  <!-- Offcanvas Menu -->
  <div class="offcanvas-menu" id="offcanvas-menu">
    <label for="menu-toggle" class="close-offcanvas">&times;</label>
    <a href="lista_cursos.html" class="btn-cursos cursos">Cursos</a>
    <a href="home.html#precios" class="btn-primary">Precios</a>
  </div>

  <!-- Main Content // Aqu√≠ deben colocar sus partes- seg√∫n el orden-->
  <main class="container">
    <!-- Subt√≠tulo Continuar cursos -->
    <h2 class="continuar-cursos-titulo">Continuar cursos</h2>
    <!-- Carrusel de cursos -->
    <div class="carousel-wrapper">
      <button class="carousel-prev"><i class="fas fa-chevron-left"></i></button>
      <div class="dashboard-carousel">
        <div class="carousel-item">
          <img src="assets/imagenes_cursos/introducion a la IA.jpg" alt="JavaScript">
          <span class="carousel-number">1</span>
          <div class="carousel-title">Introducci√≥n a la IA</div>
          <div class="carousel-progress">Progreso: 20%</div>
          <a href="#CursoIntroduccion" class="btn-outline">Continuar</a>
        </div>
        <div class="carousel-item">
          <img src="assets/imagenes_cursos/tecnicas avanzadas de IA.jpg" alt="tipescript">
          <span class="carousel-number">2</span>
          <div class="carousel-title">T√©cnicas avanzadas de IA</div>
          <div class="carousel-progress">Progreso: 45%</div>
          <a href="#CursoTecnicas" class="btn-outline">Continuar</a>
        </div>
        <div class="carousel-item">
          <img src="assets/imagenes_cursos/Etica y sociedad de la IA.png" alt="react">
          <span class="carousel-number">3</span>
          <div class="carousel-title">Etica y sociedad</div>
          <div class="carousel-progress">Progreso: 10%</div>
          <a href="#CursoEtica" class="btn-outline">Continuar</a>
        </div>
        <div class="carousel-item">
          <img src="assets/imagenes_cursos/IA en los negocios.jpg" alt="Python">
          <span class="carousel-number">4</span>
          <div class="carousel-title">IA en los negocios</div>
          <div class="carousel-progress">Progreso: 35%</div>
          <a href="#CursoIAnegocios" class="btn-outline">Continuar</a>
        </div>
        <div class="carousel-item">
          <img src="assets/imagenes_cursos/IA para principiantes.jpeg" alt="Programaci√≥n">
          <span class="carousel-number">5</span>
          <div class="carousel-title">IA para principiantes</div>
          <div class="carousel-progress">Progreso: 60%</div>
          <a href="#CursoPrincipiantes" class="btn-outline">Continuar</a>
        </div>
        <div class="carousel-item">
          <img src="assets/imagenes_cursos/gestion de proyectos de IA.jpg" alt="html">
          <span class="carousel-number">6</span>
          <div class="carousel-title">Gesti√≥n de proyectos de IA</div>
          <div class="carousel-progress">Progreso: 10%</div>
          <a href="#CursoGestion" class="btn-outline">Continuar</a>
        </div>
      </div>
      <button class="carousel-next"><i class="fas fa-chevron-right"></i></button>
    </div>
    <!-- Carrusel de cursos tendencias -->
    <div class="cursos-tendencias-header">
      <h2 class="continuar-cursos-tendencia" >üî• Tendencias</h2>
    </div>
    </div>
        <div class="carousel-wrapper">
          <button class="carousel-prev cursos-tendencias-prev"><i class="fas fa-chevron-left"></i></button>
          <div class="dashboard-carousel cursos-recomendados-carousel" id="cursos-tedencia-carousel">
          </div>
          <button class="carousel-next cursos-tendencias-next"><i class="fas fa-chevron-right"></i></button>
        </div>
        </section>
    <!-- Carrusel de cursos recomendados -->
    <div class="cursos-recomendados-header">
      <h2 class="continuar-cursos-titulo">Cursos recomendados</h2>
      <a href="lista_cursos.html" class="dashboard-link">Ver todos los cursos</a>
    </div>
        <div class="carousel-wrapper">
          <button class="carousel-prev cursos-recomendados-prev"><i class="fas fa-chevron-left"></i></button>
          <div class="dashboard-carousel cursos-recomendados-carousel" id="cursos-recomendados-carousel">
          </div>
          <button class="carousel-next cursos-recomendados-next"><i class="fas fa-chevron-right"></i></button>
        </div>
        </section>

        <!-- Espacio para "Mis rutas" en forma de carrusel -->
        <section class="mis-rutas-section">
      <div class="mis-rutas-header">
        <h2 class="continuar-cursos-titulo">Mis rutas</h2>
        <a href="mis_rutas.html" class="dashboard-link" id="ver-todas-rutas">Ver todas</a>
      </div>
      <div class="carousel-wrapper">
        <button class="carousel-prev mis-rutas-prev"><i class="fas fa-chevron-left"></i></button>
        <div class="dashboard-carousel mis-rutas-carousel" id="mis-rutas-carousel">
          <!-- Las rutas se llenan din√°micamente -->
        </div>
        <button class="carousel-next mis-rutas-next"><i class="fas fa-chevron-right"></i></button>
      </div>
    </section>
        <!-- Fin de espacio para "Mis rutas" -->

        <!--precios-->
        <section class="pricing" id="precios">
          <h2>Planes de precios</h2>
          <div class="pricing-cards">
            <div class="pricing-card pro">
              <h3>Plan mensual</h3>
              <p class="price">S/ 70</p>
              <ul>
                <li>Acceso ilimitado a todos los cursos</li>
                <li>Certificados profesionales</li>
                <li>Proyectos pr√°cticos</li>
                <li>Soporte prioritario</li>
              </ul>

              <a href="pagos.html" class="btn-outline">M√°s popular</a>

            </div>
            <div class="pricing-card business featured">
              <h3>Plan anual</h3>
              <p class="price">S/ 700 </p>
              <ul>
                <li>Todo lo del plan mensual</li>
                <li>2 meses gratis (ahorras S/140)</li>
                <li>Acceso anticipado a nuevos cursos</li>
                <li>Somos felices</li>
              </ul>

              <a href="pagos.html" class="btn-primary">M√°s ahorro</a>

            </div>
          </div>
        </section>

    <!-- FAQ Button -->
    <div class="faq-button" id="faqToggle">
      <i class="fas fa-comment-dots"></i>
    </div>

    <!-- FAQ Popup -->
    <div class="faq-popup" id="faqPopup">
      <input type="text" placeholder="Tu nombre" id="faqName" />
      <input type="email" placeholder="Tu correo" id="faqEmail" />
      <textarea placeholder="¬øEn qu√© podemos ayudarte?" id="faqMessage"></textarea>
      <button id="faqSend">Enviar</button>
    </div>
  </main>
  <script type="module" src="js/cursos_recomendados.js"></script>
  <script type="module" src="js/cursos_tendencia.js"></script>
  <script src="js/misrutasIndex.js"></script>
  <script type="module" src="js/barraBusqueda.js"></script>
  <script type="module" src="js/log_out.js"></script>
  <script src="js/perfil.js"></script>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    // Sidebar toggle y colisi√≥n igual que perfil
    const sidebar = document.getElementById("sidebar");
    const sidebarToggle = document.getElementById("sidebarToggle");
    function updateSidebarTogglePosition() {
      if (sidebar.classList.contains("collapsed")) {
        sidebarToggle.innerHTML = "&gt;";
        sidebar.style.width = "64px";
        document.body.classList.add("sidebar-collapsed");
        sidebarToggle.style.position = "absolute";
        sidebarToggle.style.left = "50%";
        sidebarToggle.style.transform = "translateX(-50%)";
      } else {
        sidebarToggle.innerHTML = "&lt;&lt;";
        sidebar.style.width = "";
        document.body.classList.remove("sidebar-collapsed");
        sidebarToggle.style.position = "relative";
        sidebarToggle.style.left = "0";
        sidebarToggle.style.transform = "none";
      }
      sidebarToggle.style.display = "flex";
      sidebarToggle.style.alignItems = "center";
      sidebarToggle.style.justifyContent = "center";
    }
    if (sidebarToggle && sidebar) {
      sidebarToggle.addEventListener("click", () => {
        sidebar.classList.toggle("collapsed");
        updateSidebarTogglePosition();
      });
      updateSidebarTogglePosition();
    }

    // --- NAVBAR AVATAR MENU PERSONALIZADO (igual que perfil.js) ---
    const avatarDesktop = document.getElementById('avatarDesktop');
    const avatarMenu = document.getElementById('avatarMenu');
    // Actualiza el icono de perfil en el navbar si hay uno guardado
    const savedAvatar = localStorage.getItem('perfilAvatar');
    if (savedAvatar) {
      const navbarAvatar = avatarDesktop.querySelector('img');
      if (navbarAvatar) navbarAvatar.src = savedAvatar;
    }
    function construirMenuAvatar() {
      let nombreMostrar = localStorage.getItem('perfilNombre') || 'Usuario';
      avatarMenu.innerHTML = `
        <div style="padding: 16px 18px 8px 18px; color: #8CCCCF; font-weight: bold; font-size: 1.1rem;">Hola ${nombreMostrar}</div>
        <button class="avatar-menu__item" id="btnMiPerfil" style="width:100%;text-align:left;padding:10px 18px;background:none;border:none;color:#fff;font-size:1rem;cursor:pointer;">Mi perfil</button>
        <hr style="border:0;border-top:1px solid #2E696B;margin:8px 0;">
        <button class="avatar-menu__item" id="logoutBtn" style="width:100%;text-align:left;padding:10px 18px;background:none;border:none;color:#e74c3c;font-size:1rem;cursor:pointer;">Cerrar sesi√≥n</button>
      `;
      avatarMenu.querySelector('#btnMiPerfil').onclick = function() {
        window.location.href = 'perfil.html';
      };
      avatarMenu.querySelector('#logoutBtn').onclick = function() {
        window.location.href = 'index.html';
      };
    }
    if (avatarDesktop && avatarMenu) {
      avatarDesktop.addEventListener('click', function (e) {
        e.stopPropagation();
        construirMenuAvatar();
        avatarMenu.style.display = avatarMenu.style.display === 'block' ? 'none' : 'block';
      });
      document.addEventListener('click', function (e) {
        if (avatarMenu.style.display === 'block' && !avatarDesktop.contains(e.target)) {
          avatarMenu.style.display = 'none';
        }
      });
    }

    // Carrusel con flechas izquierda y derecha
    const continuarCarousel = document.querySelector('.dashboard-carousel:not(.cursos-recomendados-carousel)');
    const continuarNextBtn = document.querySelector('.carousel-next:not(.cursos-recomendados-next)');
    const continuarPrevBtn = document.querySelector('.carousel-prev:not(.cursos-recomendados-prev)');
    const scrollAmount = 220;

    if (continuarCarousel && continuarNextBtn) {
      continuarNextBtn.addEventListener('click', () => {
        continuarCarousel.scrollBy({ left: scrollAmount, behavior: 'smooth' });
      });
    }
    if (continuarCarousel && continuarPrevBtn) {
      continuarPrevBtn.addEventListener('click', () => {
        continuarCarousel.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
      });
    }

    // Carrusel "Cursos recomendados"
    const recomendadosCarousel = document.getElementById('cursos-recomendados-carousel');
    const recomendadosNextBtn = document.querySelector('.cursos-recomendados-next');
    const recomendadosPrevBtn = document.querySelector('.cursos-recomendados-prev');

    if (recomendadosCarousel && recomendadosNextBtn) {
      recomendadosNextBtn.addEventListener('click', () => {
        recomendadosCarousel.scrollBy({ left: scrollAmount, behavior: 'smooth' });
      });
    }
    if (recomendadosCarousel && recomendadosPrevBtn) {
      recomendadosPrevBtn.addEventListener('click', () => {
        recomendadosCarousel.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
      });
    }
    // Carrusel "Tendencias"
    const tendenciasCarousel = document.getElementById('cursos-tedencia-carousel');
    const tendenciasNextBtn = document.querySelector('.cursos-tendencias-next');
    const tendenciasPrevBtn = document.querySelector('.cursos-tendencias-prev');
    const tendenciasScrollAmount = 220;

    if (tendenciasCarousel && tendenciasNextBtn) {
      tendenciasNextBtn.addEventListener('click', () => {
        tendenciasCarousel.scrollBy({ left: tendenciasScrollAmount, behavior: 'smooth' });
      });
    }
    if (tendenciasCarousel && tendenciasPrevBtn) {
      tendenciasPrevBtn.addEventListener('click', () => {
        tendenciasCarousel.scrollBy({ left: -tendenciasScrollAmount, behavior: 'smooth' });
      });
    }
    // Carrusel "Mis rutas" con contador de cursos actualizado
    const rutasCarousel = document.getElementById('mis-rutas-carousel');
    const rutasNextBtn = document.querySelector('.mis-rutas-next');
    const rutasPrevBtn = document.querySelector('.mis-rutas-prev');
    const rutasScrollAmount = 340;

    function getRutasGuardadas() {
      const rutas = JSON.parse(localStorage.getItem('rutasUsuario') || '[]');
      const cursosPorRuta = JSON.parse(localStorage.getItem('cursosPorRuta') || '{}');
      return rutas.map(nombre => ({
        nombre,
        cursos: (cursosPorRuta[nombre] || []).length,
        descripcion: 'Ruta Personalizada',
        icono: 'fa-route'
      }));
    }

    function renderRutasCarousel() {
      if (!rutasCarousel) return;
      rutasCarousel.innerHTML = "";
      const rutas = getRutasGuardadas();
      if (rutas.length === 0) {
        rutasCarousel.innerHTML = `<div style="color:#bdbdbd;padding:24px 0;">No tienes rutas creadas a√∫n.</div>`;
        return;
      }
      rutas.forEach((ruta, idx) => {
        const item = document.createElement('div');
        item.className = 'ruta-carousel-item';
        item.style.cursor = 'default';
        item.innerHTML = `
          <div class="ruta-card">
            <div class="ruta-icon"><i class="fas ${ruta.icono}"></i></div>
            <div class="ruta-info">
              <div class="ruta-nombre">${ruta.nombre}</div>
              <div class="ruta-detalles"><span class="contador-cursos">${ruta.cursos}</span> cursos &nbsp; <span class="ruta-descripcion">${ruta.descripcion}</span></div>
            </div>
            <div class="ruta-arrow"><i class="fas fa-arrow-right"></i></div>
          </div>
        `;
        // Ya NO redirige al hacer click
        rutasCarousel.appendChild(item);
      });
    }

    renderRutasCarousel();

    if (rutasNextBtn && rutasCarousel) {
      rutasNextBtn.addEventListener('click', () => {
        rutasCarousel.scrollBy({ left: rutasScrollAmount, behavior: 'smooth' });
      });
    }
    if (rutasPrevBtn && rutasCarousel) {
      rutasPrevBtn.addEventListener('click', () => {
        rutasCarousel.scrollBy({ left: -rutasScrollAmount, behavior: 'smooth' });
      });
    }
    // Referencias comunes
    const toggle = document.getElementById("menu-toggle");
    const faqSendButton = document.getElementById('faqSend');

    // Funcionalidad del men√∫ hamburguesa (offcanvas)
    if (toggle) {
      toggle.addEventListener("change", function () {
        document.body.classList.toggle("menu-open", toggle.checked);
      });
    }

    // Env√≠o del formulario de preguntas frecuentes
    if (faqSendButton) {
      faqSendButton.addEventListener("click", () => {
        const name = document.getElementById('faqName').value.trim();
        const email = document.getElementById('faqEmail').value.trim();
        const message = document.getElementById('faqMessage').value.trim();
        const faqPopup = document.getElementById('faqPopup');

        if (!name || !email || !message) {
          alert('Por favor, completa todos los campos.');
        } else {
          alert('¬°Mensaje enviado! Gracias por contactarnos.');
          // Limpiar los campos
          document.getElementById('faqName').value = '';
          document.getElementById('faqEmail').value = '';
          document.getElementById('faqMessage').value = '';
          if (faqPopup) faqPopup.style.display = 'none';
        }
      });
    }

    // Mostrar/ocultar el popup de preguntas frecuentes
    const faqToggle = document.getElementById('faqToggle');
    const faqPopup = document.getElementById('faqPopup');

    if (faqToggle && faqPopup) {
      faqToggle.addEventListener('click', () => {
        faqPopup.style.display = faqPopup.style.display === 'block' ? 'none' : 'block';
      });

      // Opcional: cerrar el popup al hacer clic fuera de √©l
      document.addEventListener('click', (e) => {
        if (
          faqPopup.style.display === 'block' &&
          !faqPopup.contains(e.target) &&
          e.target !== faqToggle
        ) {
          faqPopup.style.display = 'none';
        }
      });
    }
  });
  </script>
  <style>
    /* Estilos b√°sicos para el carrusel de rutas */
    .mis-rutas-section {
      margin: 40px 0 32px 0;
    }
    .mis-rutas-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .mis-rutas-carousel {
      display: flex;
      overflow-x: auto;
      gap: 18px;
      padding-bottom: 8px;
      scroll-behavior: smooth;
    }
    .ruta-carousel-item {
      min-width: 320px;
      max-width: 340px;
      background: #1a3a3a; /* Cambiado a color de fondo de la paleta */
      border-radius: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.10);
      display: flex;
      align-items: center;
      padding: 18px 22px;
      position: relative;
      color: #fff;
      transition: box-shadow 0.2s, background 0.2s;
      border: 2px solid #214A4A; /* Borde sutil de la paleta */
    }
    .ruta-carousel-item:hover {
      box-shadow: 0 4px 16px rgba(46, 105, 107, 0.18);
      background: #214A4A; /* Hover m√°s claro de la paleta */
      border-color: #2E696B;
    }
    .ruta-card {
      display: flex;
      align-items: center;
      width: 100%;
    }
    .ruta-icon {
      font-size: 2.3rem;
      margin-right: 18px;
      color: #8CCCCF; /* Color principal de la paleta */
      flex-shrink: 0;
      background: #214A4A;
      border-radius: 12px;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .ruta-info {
      flex: 1;
    }
    .ruta-nombre {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 2px;
      color: #fff;
    }
    .ruta-detalles {
      font-size: 0.98rem;
      color: #8CCCCF; /* Texto secundario de la paleta */
    }
    .ruta-arrow {
      font-size: 1.3rem;
      color: #8CCCCF;
      margin-left: 12px;
      flex-shrink: 0;
      transition: color 0.2s;
    }
    .ruta-carousel-item:hover .ruta-arrow {
      color: #fff;
    }
    .carousel-wrapper {
      display: flex;
      align-items: center;
      gap: 0;
    }
    .carousel-prev, .carousel-next {
      background: none;
      border: none;
      color: #8CCCCF;
      font-size: 1.7rem;
      cursor: pointer;
      padding: 0 10px;
      transition: color 0.2s;
    }
    .carousel-prev:hover, .carousel-next:hover {
      color: #fff;
    }
    @media (max-width: 600px) {
      .ruta-carousel-item {
        min-width: 90vw;
        max-width: 95vw;
      }
    }
  </style>
</body>
</html>